# WMS ä»“åº“ç®¡ç†ç³»ç»Ÿåç«¯

ä¸€ä¸ªåŸºäºSpring Bootçš„å®Œæ•´ä»“åº“ç®¡ç†ç³»ç»Ÿåç«¯é¡¹ç›®ï¼Œä¸“ä¸ºå‰ç«¯å¼€å‘è€…è®¾è®¡ï¼Œæä¾›äº†è¯¦ç»†çš„é¡¹ç›®ç»“æ„å’Œé…ç½®è¯´æ˜ã€‚

## ğŸš€ é¡¹ç›®ç‰¹æ€§

- **å®Œæ•´çš„Spring Booté¡¹ç›®ç»“æ„** - æ ‡å‡†çš„Mavené¡¹ç›®å¸ƒå±€
- **åˆ†å±‚æ¶æ„è®¾è®¡** - Controllerã€Serviceã€Repositoryä¸‰å±‚æ¶æ„
- **æ•°æ®åº“æ”¯æŒ** - æ”¯æŒH2ï¼ˆå¼€å‘ï¼‰å’ŒMySQLï¼ˆç”Ÿäº§ï¼‰
- **RESTful API** - å®Œæ•´çš„CRUDæ“ä½œæ¥å£
- **æ•°æ®éªŒè¯** - ä½¿ç”¨Bean Validationè¿›è¡Œå‚æ•°éªŒè¯
- **å¼‚å¸¸å¤„ç†** - å…¨å±€å¼‚å¸¸å¤„ç†æœºåˆ¶
- **è·¨åŸŸæ”¯æŒ** - é…ç½®CORSæ”¯æŒå‰ç«¯è°ƒç”¨
- **å®‰å…¨é…ç½®** - Spring SecurityåŸºç¡€é…ç½®
- **åˆ†é¡µæŸ¥è¯¢** - æ”¯æŒåˆ†é¡µå’Œæ’åº
- **æ—¥å¿—è®°å½•** - å®Œæ•´çš„æ—¥å¿—é…ç½®
- **Spring Boot 3.xå…¼å®¹** - ä½¿ç”¨æœ€æ–°çš„Spring Boot 3.4.1å’ŒJakarta EEè§„èŒƒ

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/com/bj/wms/
â”‚   â”‚   â”œâ”€â”€ WmsApplication.java          # ä¸»å¯åŠ¨ç±»
â”‚   â”‚   â”œâ”€â”€ config/                      # é…ç½®ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ AppConfig.java           # åº”ç”¨é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ DatabaseConfig.java      # æ•°æ®åº“é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java      # å®‰å…¨é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ WebConfig.java           # Webé…ç½®
â”‚   â”‚   â”œâ”€â”€ controller/                  # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ HomeController.java      # é¦–é¡µæ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ UserController.java      # ç”¨æˆ·æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ProductController.java   # å•†å“æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â””â”€â”€ WarehouseController.java # ä»“åº“æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ entity/                      # å®ä½“ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ BaseEntity.java          # åŸºç¡€å®ä½“
â”‚   â”‚   â”‚   â”œâ”€â”€ User.java                # ç”¨æˆ·å®ä½“
â”‚   â”‚   â”‚   â”œâ”€â”€ Product.java             # å•†å“å®ä½“
â”‚   â”‚   â”‚   â””â”€â”€ Warehouse.java           # ä»“åº“å®ä½“
â”‚   â”‚   â”œâ”€â”€ exception/                   # å¼‚å¸¸å¤„ç†
â”‚   â”‚   â”‚   â””â”€â”€ GlobalExceptionHandler.java # å…¨å±€å¼‚å¸¸å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ repository/                  # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ UserRepository.java      # ç”¨æˆ·Repository
â”‚   â”‚   â”‚   â”œâ”€â”€ ProductRepository.java   # å•†å“Repository
â”‚   â”‚   â”‚   â””â”€â”€ WarehouseRepository.java # ä»“åº“Repository
â”‚   â”‚   â”œâ”€â”€ service/                     # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ UserService.java         # ç”¨æˆ·æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ ProductService.java      # å•†å“æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ WarehouseService.java    # ä»“åº“æœåŠ¡
â”‚   â”‚   â””â”€â”€ util/                        # å·¥å…·ç±»
â”‚   â”‚       â”œâ”€â”€ PageUtil.java            # åˆ†é¡µå·¥å…·
â”‚   â”‚       â””â”€â”€ ResponseUtil.java        # å“åº”å·¥å…·
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ application.yml              # ä¸»é…ç½®æ–‡ä»¶
â”‚       â”œâ”€â”€ application-dev.yml          # å¼€å‘ç¯å¢ƒé…ç½®
â”‚       â”œâ”€â”€ application-prod.yml         # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”‚       â””â”€â”€ data.sql                     # åˆå§‹åŒ–æ•°æ®
â””â”€â”€ test/
    â””â”€â”€ java/com/bj/wms/
        â””â”€â”€ WmsApplicationTests.java     # æµ‹è¯•ç±»
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Java 21** - ç¼–ç¨‹è¯­è¨€
- **Spring Boot 3.4.1** - åº”ç”¨æ¡†æ¶
- **Spring Data JPA** - æ•°æ®è®¿é—®
- **Spring Security** - å®‰å…¨æ¡†æ¶
- **H2 Database** - å¼€å‘æ•°æ®åº“
- **MySQL** - ç”Ÿäº§æ•°æ®åº“
- **Maven 3.9.11** - é¡¹ç›®ç®¡ç†
- **Lombok** - ä»£ç ç®€åŒ–
- **Bean Validation** - æ•°æ®éªŒè¯

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- JDK 21.0.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.9.11 æˆ–æ›´é«˜ç‰ˆæœ¬
- MySQL 8.0ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <your-repo-url>
cd wms-backend
```

### 2. é…ç½®æ•°æ®åº“

#### å¼€å‘ç¯å¢ƒï¼ˆä½¿ç”¨H2å†…å­˜æ•°æ®åº“ï¼‰
æ— éœ€é¢å¤–é…ç½®ï¼Œé¡¹ç›®å·²é…ç½®H2å†…å­˜æ•°æ®åº“ã€‚

#### ç”Ÿäº§ç¯å¢ƒï¼ˆä½¿ç”¨MySQLï¼‰
1. å®‰è£…MySQL 8.0
2. åˆ›å»ºæ•°æ®åº“ï¼š
```sql
CREATE DATABASE wms_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```
3. ä¿®æ”¹ `application-prod.yml` ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯

### 3. è¿è¡Œé¡¹ç›®

```bash
# å¼€å‘ç¯å¢ƒè¿è¡Œ
mvn spring-boot:run

# æˆ–è€…æŒ‡å®šå¼€å‘ç¯å¢ƒé…ç½®
mvn spring-boot:run -Dspring-boot.run.profiles=dev

# ç”Ÿäº§ç¯å¢ƒè¿è¡Œ
mvn spring-boot:run -Dspring-boot.run.profiles=prod
```

### 4. è®¿é—®åº”ç”¨

- åº”ç”¨åœ°å€ï¼šhttp://localhost:8080/api/v1
- å¥åº·æ£€æŸ¥ï¼šhttp://localhost:8080/api/v1/health
- H2æ§åˆ¶å°ï¼šhttp://localhost:8080/h2-consoleï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰

## ğŸ“š APIæ–‡æ¡£

### åŸºç¡€æ¥å£

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| GET | `/api/v1/` | ç³»ç»Ÿé¦–é¡µ |
| GET | `/api/v1/health` | å¥åº·æ£€æŸ¥ |

### ç”¨æˆ·ç®¡ç†

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| POST | `/api/v1/users` | åˆ›å»ºç”¨æˆ· |
| GET | `/api/v1/users` | è·å–ç”¨æˆ·åˆ—è¡¨ |
| GET | `/api/v1/users/{id}` | è·å–ç”¨æˆ·è¯¦æƒ… |
| GET | `/api/v1/users/username/{username}` | æ ¹æ®ç”¨æˆ·åè·å–ç”¨æˆ· |
| GET | `/api/v1/users/search` | æœç´¢ç”¨æˆ· |
| GET | `/api/v1/users/role/{role}` | æ ¹æ®è§’è‰²è·å–ç”¨æˆ· |
| PUT | `/api/v1/users/{id}` | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ |
| PUT | `/api/v1/users/{id}/password` | ä¿®æ”¹å¯†ç  |
| DELETE | `/api/v1/users/{id}` | åˆ é™¤ç”¨æˆ· |

### å•†å“ç®¡ç†

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| POST | `/api/v1/products` | åˆ›å»ºå•†å“ |
| GET | `/api/v1/products` | è·å–å•†å“åˆ—è¡¨ |
| GET | `/api/v1/products/{id}` | è·å–å•†å“è¯¦æƒ… |
| GET | `/api/v1/products/code/{productCode}` | æ ¹æ®ç¼–ç è·å–å•†å“ |
| GET | `/api/v1/products/search` | æœç´¢å•†å“ |
| GET | `/api/v1/products/category/{category}` | æ ¹æ®åˆ†ç±»è·å–å•†å“ |
| GET | `/api/v1/products/brand/{brand}` | æ ¹æ®å“ç‰Œè·å–å•†å“ |
| GET | `/api/v1/products/low-stock` | è·å–åº“å­˜ä¸è¶³å•†å“ |
| GET | `/api/v1/products/over-stock` | è·å–åº“å­˜è¿‡å¤šå•†å“ |
| PUT | `/api/v1/products/{id}` | æ›´æ–°å•†å“ä¿¡æ¯ |
| PUT | `/api/v1/products/{id}/stock` | æ›´æ–°åº“å­˜ |
| PUT | `/api/v1/products/{id}/stock/increase` | å¢åŠ åº“å­˜ |
| PUT | `/api/v1/products/{id}/stock/decrease` | å‡å°‘åº“å­˜ |
| DELETE | `/api/v1/products/{id}` | åˆ é™¤å•†å“ |

### ä»“åº“ç®¡ç†

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| POST | `/api/v1/warehouses` | åˆ›å»ºä»“åº“ |
| GET | `/api/v1/warehouses` | è·å–ä»“åº“åˆ—è¡¨ |
| GET | `/api/v1/warehouses/{id}` | è·å–ä»“åº“è¯¦æƒ… |
| GET | `/api/v1/warehouses/code/{warehouseCode}` | æ ¹æ®ç¼–ç è·å–ä»“åº“ |
| GET | `/api/v1/warehouses/search` | æœç´¢ä»“åº“ |
| GET | `/api/v1/warehouses/active` | è·å–å¯ç”¨ä»“åº“ |
| GET | `/api/v1/warehouses/high-usage` | è·å–é«˜ä½¿ç”¨ç‡ä»“åº“ |
| PUT | `/api/v1/warehouses/{id}` | æ›´æ–°ä»“åº“ä¿¡æ¯ |
| PUT | `/api/v1/warehouses/{id}/capacity` | æ›´æ–°ä½¿ç”¨å®¹é‡ |
| GET | `/api/v1/warehouses/{id}/usage-rate` | è®¡ç®—ä½¿ç”¨ç‡ |
| DELETE | `/api/v1/warehouses/{id}` | åˆ é™¤ä»“åº“ |

## ğŸ”§ é…ç½®è¯´æ˜

### åˆ†é¡µå‚æ•°

- `page`: é¡µç ï¼ˆä»0å¼€å§‹ï¼Œé»˜è®¤0ï¼‰
- `size`: é¡µå¤§å°ï¼ˆé»˜è®¤10ï¼Œæœ€å¤§100ï¼‰
- `sortBy`: æ’åºå­—æ®µï¼ˆé»˜è®¤idï¼‰
- `sortDir`: æ’åºæ–¹å‘ï¼ˆasc/descï¼Œé»˜è®¤descï¼‰

### ç”¨æˆ·è§’è‰²

- `ADMIN`: ç®¡ç†å‘˜
- `MANAGER`: ä»“åº“ç®¡ç†å‘˜
- `OPERATOR`: æ“ä½œå‘˜
- `VIEWER`: æŸ¥çœ‹è€…

### çŠ¶æ€ç 

- `0`: ç¦ç”¨/ä¸‹æ¶
- `1`: å¯ç”¨/ä¸Šæ¶

## ğŸ§ª æµ‹è¯•æ•°æ®

é¡¹ç›®å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ’å…¥æµ‹è¯•æ•°æ®ï¼š

### æµ‹è¯•ç”¨æˆ·
- ç”¨æˆ·åï¼š`admin`ï¼Œå¯†ç ï¼š`123456`ï¼Œè§’è‰²ï¼šç®¡ç†å‘˜
- ç”¨æˆ·åï¼š`manager1`ï¼Œå¯†ç ï¼š`123456`ï¼Œè§’è‰²ï¼šä»“åº“ç®¡ç†å‘˜
- ç”¨æˆ·åï¼š`operator1`ï¼Œå¯†ç ï¼š`123456`ï¼Œè§’è‰²ï¼šæ“ä½œå‘˜
- ç”¨æˆ·åï¼š`viewer1`ï¼Œå¯†ç ï¼š`123456`ï¼Œè§’è‰²ï¼šæŸ¥çœ‹è€…

### æµ‹è¯•ä»“åº“
- WH001: åŒ—äº¬æ€»ä»“
- WH002: ä¸Šæµ·åˆ†ä»“
- WH003: å¹¿å·åˆ†ä»“

### æµ‹è¯•å•†å“
- P001: iPhone 15 Pro
- P002: MacBook Pro
- P003: AirPods Pro
- P004: iPad Air
- P005: Samsung Galaxy S24

## ğŸ”’ å®‰å…¨é…ç½®

é¡¹ç›®ä½¿ç”¨Spring Securityè¿›è¡Œå®‰å…¨é…ç½®ï¼š

- å¯†ç ä½¿ç”¨BCryptåŠ å¯†
- æ”¯æŒè·¨åŸŸè¯·æ±‚
- æš‚æ—¶å¼€æ”¾æ‰€æœ‰APIæ¥å£ï¼ˆå¯æ ¹æ®éœ€è¦æ·»åŠ è®¤è¯ï¼‰

## ğŸ“ å¼€å‘å»ºè®®

### ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œä½ éœ€è¦äº†è§£ï¼š

1. **APIè°ƒç”¨æ–¹å¼**
   - æ‰€æœ‰APIéƒ½æœ‰ç»Ÿä¸€çš„å“åº”æ ¼å¼
   - æ”¯æŒåˆ†é¡µæŸ¥è¯¢
   - é”™è¯¯ä¿¡æ¯ç»Ÿä¸€å¤„ç†

2. **æ•°æ®éªŒè¯**
   - åç«¯ä¼šéªŒè¯æ‰€æœ‰è¾“å…¥æ•°æ®
   - éªŒè¯å¤±è´¥ä¼šè¿”å›è¯¦ç»†é”™è¯¯ä¿¡æ¯

3. **è·¨åŸŸé…ç½®**
   - å·²é…ç½®æ”¯æŒå‰ç«¯è·¨åŸŸè°ƒç”¨
   - æ”¯æŒæ‰€æœ‰HTTPæ–¹æ³•

4. **åˆ†é¡µå¤„ç†**
   - ä½¿ç”¨æ ‡å‡†çš„åˆ†é¡µå‚æ•°
   - å“åº”åŒ…å«åˆ†é¡µä¿¡æ¯

## ğŸš€ éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ
```bash
mvn spring-boot:run
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# æ‰“åŒ…
mvn clean package

# è¿è¡Œ
java -jar target/wms-backend-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod
```

## ğŸ“ æ”¯æŒ

å¦‚æœä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶äº†è§£è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®
3. ç¡®è®¤Javaç‰ˆæœ¬å’ŒMavenç‰ˆæœ¬
4. æŸ¥çœ‹APIæ–‡æ¡£ç¡®è®¤è¯·æ±‚æ ¼å¼

## ğŸ”„ ç‰ˆæœ¬å‡çº§è¯´æ˜

### Spring Boot 3.x å‡çº§è¦ç‚¹

æœ¬é¡¹ç›®å·²å‡çº§åˆ°Spring Boot 3.4.1ï¼Œä¸»è¦å˜æ›´åŒ…æ‹¬ï¼š

1. **Javaç‰ˆæœ¬è¦æ±‚**: æœ€ä½è¦æ±‚Java 17ï¼Œæ¨èä½¿ç”¨Java 21
2. **Jakarta EE**: æ‰€æœ‰`javax.*`åŒ…å·²è¿ç§»åˆ°`jakarta.*`åŒ…
3. **Spring Security**: é…ç½®æ–¹å¼å·²æ›´æ–°ä¸ºæ–°çš„Lambda DSLé£æ ¼
4. **JWTä¾èµ–**: å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬0.12.6ä»¥å…¼å®¹Spring Boot 3.x

### ä¸»è¦å˜æ›´

- `javax.persistence.*` â†’ `jakarta.persistence.*`
- `javax.validation.*` â†’ `jakarta.validation.*`
- Spring Securityé…ç½®ä½¿ç”¨æ–°çš„Lambda DSL
- JWTåº“å‡çº§åˆ°0.12.6ç‰ˆæœ¬

## ğŸ“„ è®¸å¯è¯

MIT License

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªå­¦ä¹ é¡¹ç›®ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰è¯·æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œå®‰å…¨åŠ å›ºå’Œæ€§èƒ½ä¼˜åŒ–ã€‚
