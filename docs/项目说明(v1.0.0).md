# 智仓云(WMS)

>为企业提供一款智能、高效、可扩展的仓库管理解决方案，通过数字化和流程优化，实现库存精准化、作业高效化、决策数据化，最终降低仓储成本，提升供应链响应速度。

## 目标

* 中小型制造企业、电商企业、第三方物流公司、零售分销商等。

## 核心价值

* 对于仓库管理员： 提升作业效率，降低差错率，减轻管理负担。
* 对于企业管理者： 实时掌握库存动态，优化库存结构，数据驱动决策。
* 对于作业人员（库工）： 任务明确，操作简单，通过PDA等设备实现无纸化作业。

## **用户角色分析**

### 系统管理员

* 核心需求
    * 用户权限管理、系统基础配置、数据备份与恢复
* 应用场景
    * 初始化仓库、创建用户账号并分配角色权限

### 仓库经理

* 核心需求
    * 全局库存监控、作业绩效分析、库存周转率优化
* 应用场景
    * 查看库存报表、审核盘点结果、监控订单处理进度

### 库存管理员

* 核心需求
    * 准确的库存数据、高效的盘点流程、库存预警
* 应用场景
    * 管理商品信息、发起并执行盘点、设置安全库存

### 入库员

* 核心需求
    * 快速准确地完成收货、质检、上架
* 应用场景
    * 使用PDA扫描收货、确认数量、系统推荐上架库位

### 出库员

* 核心需求
    * 快速准确地完成拣货、复核、打包、发货
* 应用场景
    * 接收拣货波次任务、按系统路径拣选、PDA确认发货

### 客服/销售

* 核心需求
    * 查询库存可用量、跟踪订单状态
* 应用场景
    * 在前台系统查询实时库存，了解订单在仓状态

## **核心功能模块设计**

### 模块一：基础数据管理

* 仓库/库区/库位管理： 定义仓库物理结构，支持多仓库、多库区（如收货区、存储区、拣货区、退货区、不良品区）、库位编码（如A-01-01-01）。
* 商品SKU管理： 管理商品基础信息（SKU、名称、规格、供应商、条码等），支持图片、保质期、批次管理。
* 供应商/客户管理： 维护合作伙伴信息。

### 模块二：入库管理

* 预约入库： 供应商可预约送货时间。
* 收货管理： 根据采购单或预入库单进行收货，PDA扫描验货，支持“盲收”（不知预期到货量）。
* 质检管理（可选）： 对需要质检的商品进行抽检或全检，记录结果。
* 上架管理： 系统根据策略（如就近上架、按批次上架）推荐库位，指引员工作业。

### 模块三：库存管理

* 库存查询： 多维度（SKU、库位、批次）查询实时库存。
* 库存调整： 对有损、盘点差异等情况进行人工调整，需记录原因和审批流程。
* 库存转移： 支持库位之间的库存移动。
* 盘点管理： 支持多种盘点方式（明盘、暗盘、循环盘点），生成盘点单，PDA同步数据，生成差异报告。

### 模块四：出库管理（核心）

* 订单管理： 接收来自ERP或手工创建的销售订单。
* 波次策略： 根据规则（如相同快递、相同货品）将订单聚合为波次，提升拣货效率。
* 拣货管理： 支持多种拣货方式（按单拣货、波次拣货、边拣边分、播种式），系统优化拣货路径。
* 复核打包： 对拣选出的商品进行复核，确认订单无误后打包、称重。
* 发货管理： 对接快递平台打印面单，记录运单号，更新库存为“已发货”状态。

### 模块五：报表与分析

* 库存报表： 库存明细表、库龄分析表、呆滞料报表。
* 作业报表： 入库/出库效率报表、员工作业绩效、差错率分析。
* 可视化看板： 实时展示今日入库/出库量、库存总量、订单状态分布等。



## **核心业务流程**

* 入库流程： `预约 -> 收货 -> 质检 -> 上架 -> 库存增加`
* 出库流程： `订单创建 -> 波次生成 -> 拣货 -> 复核 -> 打包 -> 发货 -> 库存减少`
* 盘点流程： `制定盘点计划 -> 锁定库存 -> 盘点执行 -> 数据录入 -> 差异分析 -> 库存调整`

## **数据库表结构设计（核心表）**

* 以下是经过精简的核心表设计，体现了主要的业务实体和关系。

### 基础信息表

* -- 仓库表
    CREATE TABLE `warehouse` (
      `id` INT PRIMARY KEY AUTO_INCREMENT,
      `name` VARCHAR(100) NOT NULL COMMENT '仓库名称',
      `code` VARCHAR(50) NOT NULL UNIQUE COMMENT '仓库编码',
      `address` VARCHAR(255) COMMENT '地址',
      `is_enabled` TINYINT DEFAULT 1 COMMENT '是否启用',
      `created_time` DATETIME DEFAULT CURRENT_TIMESTAMP
    );
    
    -- 库区表
    CREATE TABLE `storage_zone` (
      `id` INT PRIMARY KEY AUTO_INCREMENT,
      `warehouse_id` INT NOT NULL COMMENT '所属仓库ID',
      `name` VARCHAR(100) NOT NULL COMMENT '库区名（如：收货区、货架区）',
      `type` TINYINT NOT NULL COMMENT '库区类型（1：存储， 2：收货， 3：发货...）',
      FOREIGN KEY (`warehouse_id`) REFERENCES `warehouse`(`id`)
    );
    
    -- 库位表（核心）
    CREATE TABLE `storage_location` (
      `id` INT PRIMARY KEY AUTO_INCREMENT,
      `zone_id` INT NOT NULL COMMENT '所属库区ID',
      `location_code` VARCHAR(50) NOT NULL UNIQUE COMMENT '库位编码（如A-01-01）',
      `capacity` DECIMAL(10,2) COMMENT '容量',
      `current_volume` DECIMAL(10,2) DEFAULT 0 COMMENT '当前占用容量',
      `status` TINYINT DEFAULT 1 COMMENT '状态（1：空闲， 2：占用， 3：禁用）',
      FOREIGN KEY (`zone_id`) REFERENCES `storage_zone`(`id`)
    );
    
    -- 商品SKU表
    CREATE TABLE `product_sku` (
      `id` INT PRIMARY KEY AUTO_INCREMENT,
      `sku_code` VARCHAR(100) NOT NULL UNIQUE COMMENT '商品SKU编码',
      `name` VARCHAR(255) NOT NULL COMMENT '商品名称',
      `specification` VARCHAR(255) COMMENT '规格',
      `supplier_id` INT COMMENT '默认供应商ID',
      `is_batch_managed` TINYINT DEFAULT 0 COMMENT '是否管理批次',
      `is_expiry_managed` TINYINT DEFAULT 0 COMMENT '是否管理保质期',
      `shelf_life_days` INT COMMENT '保质期天数'
    );

### 业务单据表

* -- 入库单表（主单）
    CREATE TABLE `inbound_order` (
      `id` INT PRIMARY KEY AUTO_INCREMENT,
      `order_no` VARCHAR(50) NOT NULL UNIQUE COMMENT '入库单号',
      `warehouse_id` INT NOT NULL COMMENT '目标仓库',
      `supplier_id` INT NOT NULL COMMENT '供应商',
      `status` TINYINT NOT NULL COMMENT '状态（1：待收货， 2：部分收货， 3：已完成， 4：已取消）',
      `total_expected_quantity` INT COMMENT '预期总数量',
      `total_received_quantity` INT DEFAULT 0 COMMENT '实际收货总数量',
      `created_time` DATETIME DEFAULT CURRENT_TIMESTAMP
    );
    
    -- 入库单明细表
    CREATE TABLE `inbound_order_item` (
      `id` INT PRIMARY KEY AUTO_INCREMENT,
      `inbound_order_id` INT NOT NULL,
      `product_sku_id` INT NOT NULL,
      `expected_quantity` INT NOT NULL COMMENT '预期数量',
      `received_quantity` INT DEFAULT 0 COMMENT '已收数量',
      FOREIGN KEY (`inbound_order_id`) REFERENCES `inbound_order`(`id`),
      FOREIGN KEY (`product_sku_id`) REFERENCES `product_sku`(`id`)
    );
    
    -- 上架任务表（由入库单生成）
    CREATE TABLE `putaway_task` (
      `id` INT PRIMARY KEY AUTO_INCREMENT,
      `task_no` VARCHAR(50) NOT NULL UNIQUE,
      `inbound_order_item_id` INT NOT NULL COMMENT '关联的入库明细',
      `from_location_id` INT COMMENT '来源库位（通常是收货暂存区）',
      `to_location_id` INT NOT NULL COMMENT '目标上架库位',
      `quantity` INT NOT NULL COMMENT '上架数量',
      `status` TINYINT DEFAULT 1 COMMENT '状态（1：待执行， 2：已完成）',
      `operator` INT COMMENT '操作员',
      `completed_time` DATETIME
    );

### 库存核心表

* -- 库存明细表（最核心的表，记录每个库位上每个批次的库存）
    CREATE TABLE `inventory` (
      `id` INT PRIMARY KEY AUTO_INCREMENT,
      `warehouse_id` INT NOT NULL,
      `location_id` INT NOT NULL,
      `product_sku_id` INT NOT NULL,
      `batch_no` VARCHAR(100) COMMENT '批次号',
      `production_date` DATE COMMENT '生产日期',
      `expiry_date` DATE COMMENT '过期日期',
      `quantity` INT NOT NULL COMMENT '当前数量',
      `locked_quantity` INT DEFAULT 0 COMMENT '锁定数量（用于出库）',
      UNIQUE KEY `unique_stock` (`warehouse_id`, `location_id`, `product_sku_id`, `batch_no`), -- 唯一约束
      FOREIGN KEY (`warehouse_id`) REFERENCES `warehouse`(`id`),
      FOREIGN KEY (`location_id`) REFERENCES `storage_location`(`id`),
      FOREIGN KEY (`product_sku_id`) REFERENCES `product_sku`(`id`)
    );
    
    -- 库存流水表（记录所有库存变动）
    CREATE TABLE `inventory_transaction` (
      `id` BIGINT PRIMARY KEY AUTO_INCREMENT,
      `product_sku_id` INT NOT NULL,
      `batch_no` VARCHAR(100),
      `warehouse_id` INT NOT NULL,
      `location_id` INT NOT NULL,
      `transaction_type` TINYINT NOT NULL COMMENT '流水类型（1：入库， 2：出库， 3：移库， 4：盘点调整）',
      `related_order_no` VARCHAR(100) COMMENT '关联业务单号',
      `quantity_change` INT NOT NULL COMMENT '数量变化（正数为增，负数为减）',
      `quantity_after` INT NOT NULL COMMENT '变化后结余数量',
      `transaction_time` DATETIME DEFAULT CURRENT_TIMESTAMP,
      `operator` INT COMMENT '操作人'
    );

### 出库核心表

* -- 出库单表（销售订单）
    CREATE TABLE `outbound_order` (
      `id` INT PRIMARY KEY AUTO_INCREMENT,
      `order_no` VARCHAR(50) NOT NULL UNIQUE,
      `warehouse_id` INT NOT NULL,
      `status` TINYINT NOT NULL COMMENT '状态（1：待处理， 2：已分配库存， 3：拣货中， 4：已发货）',
      `customer_info` JSON COMMENT '客户信息',
      `created_time` DATETIME DEFAULT CURRENT_TIMESTAMP
    );
    
    -- 出库单明细表
    CREATE TABLE `outbound_order_item` (
      `id` INT PRIMARY KEY AUTO_INCREMENT,
      `outbound_order_id` INT NOT NULL,
      `product_sku_id` INT NOT NULL,
      `quantity` INT NOT COMMENT '需求数量',
      `allocated_quantity` INT DEFAULT 0 COMMENT '已分配库存数量',
      `picked_quantity` INT DEFAULT 0 COMMENT '已拣选数量',
      FOREIGN KEY (`outbound_order_id`) REFERENCES `outbound_order`(`id`),
      FOREIGN KEY (`product_sku_id`) REFERENCES `product_sku`(`id`)
    );
    
    -- 拣货任务表
    CREATE TABLE `picking_task` (
      `id` INT PRIMARY KEY AUTO_INCREMENT,
      `task_no` VARCHAR(50) NOT NULL UNIQUE,
      `wave_no` VARCHAR(50) COMMENT '波次号',
      `outbound_order_id` INT NOT NULL,
      `product_sku_id` INT NOT NULL,
      `from_location_id` INT NOT NULL COMMENT '拣货库位',
      `quantity` INT NOT NULL COMMENT '需拣选数量',
      `status` TINYINT DEFAULT 1 COMMENT '状态（1：待拣选， 2：部分完成， 3：已完成）',
      `picked_quantity` INT DEFAULT 0
    );

## **总结**

* V1.0 MVP（最小可行产品）： 实现核心的入库、出库、库存管理功能，支持基本的报表。

